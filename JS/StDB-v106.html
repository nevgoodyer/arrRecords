<!DOCTYPE html>
<!-- 21/9/21 Nev Goodyer - bumbled through the development of the page with help from these sites -->
<!-- https://www.w3schools.com/JS/tryit.asp?filename=tryjs_array_sort_object1 -->
<!-- from: https://www.w3schools.com/JS/js_array_sort.asp -->
<!-- and: https://www.w3schools.com/JS/js_array_methods.asp -->
<html>
<head>
    <meta charset="utf-8">
    <title>v1.05 Student DB</title>
    <!-- next line adds an icon to browser tab -->
    <link rel="icon" href="../images/ssc_smalllogo-60x81.ico">
</head>
<body>
    <h1>v1.05 Student array of records</h1>
    <h3><a href="../index.html" title="Home">Home (version page)</a></h3>
    <h3>Enter student details</h3>
    First Name                        
    <textarea id="txtFirstName" rows="1" cols="10"></textarea>&nbsp;&nbsp;
    Last Name                          
    <textarea id="txtLastName" rows="1" cols="15"></textarea>&nbsp;&nbsp;<br />
    DOB                       
    <textarea id="txtDOB" rows="1" cols="10"></textarea>&nbsp;&nbsp;
    Gender                       
    <textarea id="txtGender" rows="1" cols="3"></textarea>&nbsp;&nbsp; 
    Av Mk                       
    <textarea id="txtAvgMk" rows="1" cols="3" name="S1"></textarea>&nbsp;&nbsp;
    <br />
    <br />
    <br />
    <button class="btn" type="button" onclick="addStudent()">Add Student</button>
    <br />
    <h3>List of Students</h3>
    <textarea id="txtStList" rows="10" cols="80"></textarea>
    <br 
    <br />
    Test print of array 
    <br />
    <textarea id="txtStArr" rows="10" cols="80"></textarea>
    <br />
    <p id="demo"></p>
    <script type='text/javascript'>
        // declare the "students" array as a "constant" and load 4 test records
        const students = [
            {
                studID: 1, firstName: "Johnny", lastName: "Depp",
                DOB: "9/6/63", gender: "m", avMk: 78.2,
            },
            {
                studID: 2, firstName: "Jennifer", lastName: "Lawrence",
                DOB: "15/8/90", gender: "f", avMk: 88.2,
            },
            {
                studID: 3, firstName: "George", lastName: "Clooney",
                DOB: "6/5/61", gender: "f", avMk: 68.2,
            },
            {
                studID: 4, firstName: "Scarlett", lastName: "Johansson",
                DOB: "22/11/84", gender: "f", avMk: 72.2,
            }
        ];
        displayStudents()

        function addStudent() {
            //place text from text boxes into the end of the array
            students.push(
                {
                    studID: students.length + 1, firstName: document.getElementById("txtFirstName").value,
                    lastName: document.getElementById("txtLastName").value,
                    DOB: document.getElementById("txtDOB").value,
                    gender: document.getElementById("txtGender").value,
                    avMk: document.getElementById("txtAvgMk").value
                }
            )
            //return text boxes to blank ready for next entry
            txtFirstName.value = "";
            txtLastName.value = "";
            txtDOB.value = "";
            txtGender.value = "";
            txtAvgMk.value = "";
            displayStudents()
        }
        function displayStudents() {
            // loop through to build up a string "strStList" with the each record and a line break
            strStList = "";
            for (let i = 0; i < students.length; i++) {
                strStList += students[i].studID + " - " + students[i].firstName
                    + " - " + students[i].lastName + " - " + students[i].DOB
                    + " - " + students[i].gender + " - " + students[i].avMk + "\n"  // \n is new line
            }
            txtStList.value = strStList;
            // the two displays below are for testing only
            document.getElementById("txtStArr").value = JSON.stringify(students);
            document.getElementById("demo").value = strStList;
        }
    </script>
</body>
</html>
